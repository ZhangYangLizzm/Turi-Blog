---
sidebar: auto
---

# 面试题

## js 基础

### 闭包

Q：什么是闭包?闭包的作用?

E:

```js
function createCounter() {
  let count = 0;

  return function() {
    count++;
    console.log(count);
  };
}

const counter = createCounter();

counter(); // 输出：1
counter(); // 输出：2
counter(); // 输出：3
```

A：闭包指的是函数和函数所在的词法环境的组合。一个函数可以访问创建它时所在的词法环境中的变量和函数，即使这个函数在其他地方被调用，也可以访问这些变量和函数。闭包可以用来实现模块化、缓存变量等功能。  
**详细解释:**
在JavaScript中，函数在创建时会生成一个词法环境（Lexical Environment），这个词法环境记录了函数创建时所在的作用域链。作用域链是由当前执行上下文的变量对象和所有外层函数的变量对象组成的。在函数执行时，会先搜索当前作用域链中的变量对象，如果没有找到，就会继续向上搜索外层函数的变量对象，直到找到变量或者到达全局作用域。这个搜索的过程叫做作用域链查找。    

当函数返回时，它的词法环境会被保存在内存中，并被引用到它所在的作用域链中。这个引用关系就是闭包。返回的函数可以访问保存在内存中的词法环境中的变量和函数，即使这个函数在其他地方被调用，也可以访问这些变量和函数。在上面的计数器例子中，createCounter函数返回了一个函数，这个函数就是闭包，它可以访问createCounter函数中的count变量。每次调用返回的函数，都会访问到同一个闭包中的count变量，并且可以修改它的值。

### 原型和原型链

Q：什么是原型和原型链?

A:当你创建一个对象时，JavaScript会在背后帮你创建一个原型对象，每个对象都有一个原型对象。原型对象就是一个普通的对象，它包含了一些属性和方法。你可以通过对象的__proto__属性访问它的原型对象。  
原型对象也可以有自己的原型对象，这样就形成了原型链。当你在一个对象上访问一个属性或方法时，JavaScript会先在这个对象本身查找，如果找不到，就会去它的原型对象上查找，如果还找不到，就会继续沿着原型链往上查找，直到找到这个属性或方法，或者到达原型链的顶端，即Object.prototype。

**显式原型和隐式原型**
在JavaScript中，每个函数都有一个属性叫做prototype，它是一个对象。这个prototype对象就是函数的显式原型，它包含了一些属性和方法，可以被用来实现继承。

当你创建一个对象时，JavaScript会为它创建一个__proto__属性，指向创建这个对象的构造函数的prototype。这个__proto__属性就是对象的隐式原型，它指向对象的原型对象。

### 垃圾回收机制

JavaScript是一种高级语言，它使用了自动内存管理机制，即垃圾回收机制，来管理内存。垃圾回收机制的主要目的是自动寻找和释放不再使用的对象，以便释放内存空间。

在JavaScript中，垃圾回收器会定期扫描内存中的所有对象，找出哪些对象是不再被引用的，然后释放它们所占用的内存空间。具体来说，当一个对象不再被引用时，它就会被标记为可回收的垃圾对象。接着，垃圾回收器会清除这些垃圾对象所占用的内存空间，以便其他对象可以使用这些空间。

JavaScript中的垃圾回收器使用的是基于标记的垃圾回收算法，它会从一组根对象开始，递归地遍历所有从根对象出发能访问到的对象。如果一个对象没有被遍历到，则被视为不可达对象，可以被标记为垃圾对象。
